{"version":3,"sources":["api/api.js","components/Pages.js","pages/MarsPhotos/Curiosity.js"],"names":["key","api","axios","baseURL","apodAPI","date","a","get","response","data","asteroidsAPI","startDate","endDate","marsAPI","curiosityGetPhotos","camera","curiosityGetManifest","photo_manifest","spiritGetPhotos","spiritGetManifest","opportunityGetManifest","opportunityGetPhotos","Pages","photosPerPage","changePageHandler","photosCount","defaultCurrent","total","pageSize","onChange","showSizeChanger","hideOnSinglePage","Curiosity","Option","Select","history","useHistory","useState","curiosity","setCuriosity","photos","setPhotos","setCamera","setDate","offset","setOffset","currentPagePhotos","setCurrentPagePhotos","photosRef","useRef","current","setPhotosForCurrentPage","useCallback","slice","useEffect","result","className","onClick","push","ROUTES","MARS_ROVERS","value","defaultValue","style","width","required","d","_d","toISOString","split","disabledDate","start","moment","landing_date","end","max_date","add","length","map","photo","src","img_src","alt","id","loader","pageNumber","window","scrollTo","top","behavior"],"mappings":"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","file":"static/js/7.a08887df.chunk.js","sourcesContent":["import * as axios from \"axios\";\r\n\r\nconst key = \"iEipFDdtgYJAMcIUbIV9NGg27OwVNaXRdtdVhKhc\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"https://api.nasa.gov/\",\r\n});\r\n\r\nexport async function apodAPI(date) {\r\n  const response = await api.get(`planetary/apod?&date=${date}&api_key=${key}`);\r\n  return response.data;\r\n}\r\n\r\nexport async function asteroidsAPI(startDate, endDate) {\r\n  const response = await api.get(\r\n    `neo/rest/v1/feed?start_date=${startDate}&end_date=${endDate}&api_key=${key}`,\r\n  );\r\n  return response.data;\r\n}\r\n\r\nexport const marsAPI = {\r\n  async curiosityGetPhotos(camera, date) {\r\n    const { data } = await api.get(\r\n      `/mars-photos/api/v1/rovers/curiosity/photos?earth_date=${date}&camera=${camera}&api_key=${key}`,\r\n    );\r\n    return data;\r\n  },\r\n  async curiosityGetManifest() {\r\n    const { data } = await api.get(`/mars-photos/api/v1/manifests/curiosity?api_key=${key}`);\r\n    return data.photo_manifest;\r\n  },\r\n\r\n  async spiritGetPhotos(camera, date) {\r\n    const { data } = await api.get(\r\n      `/mars-photos/api/v1/rovers/spirit/photos?earth_date=${date}&camera=${camera}&api_key=${key}`,\r\n    );\r\n    return data;\r\n  },\r\n  async spiritGetManifest() {\r\n    const { data } = await api.get(`/mars-photos/api/v1/manifests/spirit?api_key=${key}`);\r\n    return data.photo_manifest;\r\n  },\r\n\r\n  async opportunityGetManifest() {\r\n    const { data } = await api.get(`/mars-photos/api/v1/manifests/opportunity?api_key=${key}`);\r\n    return data.photo_manifest;\r\n  },\r\n  async opportunityGetPhotos(camera, date) {\r\n    const { data } = await api.get(\r\n      `/mars-photos/api/v1/rovers/opportunity/photos?earth_date=${date}&camera=${camera}&api_key=${key}`,\r\n    );\r\n    return data;\r\n  },\r\n};\r\n","import { Pagination } from \"antd\";\r\n\r\nconst Pages = ({ photosPerPage, changePageHandler, photosCount }) => {\r\n  return (\r\n    <>\r\n      <Pagination\r\n        defaultCurrent={1}\r\n        total={photosCount}\r\n        pageSize={photosPerPage}\r\n        onChange={changePageHandler}\r\n        showSizeChanger={false}\r\n        hideOnSinglePage\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Pages;\r\n","import { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { DoubleLeftOutlined } from \"@ant-design/icons\";\r\nimport { DatePicker, Select } from \"antd\";\r\nimport { ROUTES } from \"../../constants/routes\";\r\nimport { marsAPI } from \"../../api/api\";\r\nimport Pages from \"../../components/Pages\";\r\nimport loader from \"../../assets/loader/Ripple-1.4s-200px.svg\";\r\n\r\nconst Curiosity = () => {\r\n  const { Option } = Select;\r\n  const history = useHistory();\r\n  const [curiosity, setCuriosity] = useState(null);\r\n  const [photos, setPhotos] = useState([]);\r\n  const [camera, setCamera] = useState(\"\");\r\n  const [date, setDate] = useState(null);\r\n\r\n  // For Pagination\r\n  const photosPerPage = 25;\r\n  const [offset, setOffset] = useState(0);\r\n  const [currentPagePhotos, setCurrentPagePhotos] = useState([]);\r\n\r\n  const photosRef = useRef();\r\n  photosRef.current = photos;\r\n\r\n  const setPhotosForCurrentPage = useCallback(() => {\r\n    setCurrentPagePhotos(photosRef.current.slice(offset, offset + photosPerPage));\r\n  }, [photosRef, offset]);\r\n\r\n  const changePageHandler = (pageNumber) => {\r\n    const currentPage = pageNumber - 1;\r\n    const offset = currentPage * photosPerPage;\r\n    setOffset(offset);\r\n    setPhotosForCurrentPage();\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const result = async () => {\r\n      const response = await marsAPI.curiosityGetManifest();\r\n      setCuriosity(response);\r\n    };\r\n    result();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const result = async () => {\r\n      const response = await marsAPI.curiosityGetPhotos(camera, date);\r\n      setPhotos(response.photos);\r\n      setPhotosForCurrentPage();\r\n    };\r\n    result();\r\n  }, [camera, date, setPhotosForCurrentPage]);\r\n\r\n  const changeCameraHandler = (value) => {\r\n    setCamera(value);\r\n  };\r\n  const changeDateHandler = (d) => {\r\n    setDate(d && d._d.toISOString().split(\"T\")[0]);\r\n    return date;\r\n  };\r\n\r\n  const disabledDate = (current) => {\r\n    if (curiosity) {\r\n      const start = moment(curiosity.landing_date, \"YYYY-MM-DD\");\r\n      const end = moment(curiosity.max_date, \"YYYY-MM-DD\").add(1, \"d\");\r\n      return current < start || current > end;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"rover--wrapper\">\r\n      <div className=\"rover--header\">\r\n        <button className=\"rover--button-back\" onClick={() => history.push(ROUTES.MARS_ROVERS)}>\r\n          <DoubleLeftOutlined /> Back\r\n        </button>\r\n        <h1>Curiosity</h1>\r\n        <p className=\"rover--description\">\r\n          Curiosity is a car-sized Mars rover designed to explore the Gale crater on Mars as part of\r\n          NASA's Mars Science Laboratory (MSL) mission. Curiosity was launched from Cape Canaveral\r\n          (CCAFS) on 26 November 2011, at 15:02:00 UTC and landed on Aeolis Palus inside Gale crater\r\n          on Mars on<b> 6 August 2012, 05:17:57 UTC</b>. The Bradbury Landing site was less than 2.4\r\n          km (1.5 mi) from the center of the rover's touchdown target after a 560 million km (350\r\n          million mi) journey.\r\n        </p>\r\n        <p className=\"rover--description bordered\">\r\n          Choose the date and select one of the rover's camera to see the photos taken.\r\n        </p>\r\n        <form className=\"rover--form\">\r\n          <Select\r\n            className=\"rover--form-item\"\r\n            onChange={changeCameraHandler}\r\n            defaultValue=\"Choose the Camera\"\r\n            style={{ width: 250 }}\r\n            required>\r\n            <Option value=\"FHAZ\">Front Hazard Avoidance Camera</Option>\r\n            <Option value=\"RHAZ\">Rear Hazard Avoidance Camera </Option>\r\n            <Option value=\"MAST\">Mast Camera</Option>\r\n            <Option value=\"CHEMCAM\">Chemistry and Camera Complex</Option>\r\n            <Option value=\"MAHLI\">Mars Hand Lens Imager</Option>\r\n            <Option value=\"MARDI\">Mars Descent Imager</Option>\r\n            <Option value=\"NAVCAM\">Navigation Camera</Option>\r\n          </Select>\r\n          <DatePicker\r\n            className=\"rover--form-item\"\r\n            onChange={changeDateHandler}\r\n            disabledDate={disabledDate}\r\n          />\r\n        </form>\r\n      </div>\r\n      <div>\r\n        <div>\r\n          {photos && photos.length > 0 ? (\r\n            <>\r\n              <div className=\"rover--photo\">\r\n                {photos.length > 1 ? (\r\n                  <p className=\"rover--p bordered\">\r\n                    {photos.length} photos were taken by {camera} camera on {date}.\r\n                  </p>\r\n                ) : (\r\n                  <p className=\"rover--p bordered\">\r\n                    {photos.length} photo was taken by {camera} camera on {date}.\r\n                  </p>\r\n                )}\r\n                {currentPagePhotos.length > 0 ? (\r\n                  currentPagePhotos.map((photo) => (\r\n                    <img\r\n                      className=\"rover--photo-item\"\r\n                      key={photo.id}\r\n                      src={photo.img_src}\r\n                      alt=\"mars\"\r\n                    />\r\n                  ))\r\n                ) : (\r\n                  <img className=\"loader\" src={loader} alt=\"Loader gif\" />\r\n                )}\r\n              </div>\r\n              <div className=\"center\">\r\n                <Pages\r\n                  photosPerPage={photosPerPage}\r\n                  changePageHandler={changePageHandler}\r\n                  photosCount={photos.length}\r\n                  photos={photos}\r\n                />\r\n              </div>\r\n            </>\r\n          ) : date ? (\r\n            <h2 className=\"text-red\">Sorry, it appears no photo from this camera on {date}.</h2>\r\n          ) : (\r\n            <h2 className=\"text-red\">Please select rover's camera and date.</h2>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Curiosity;\r\n"],"sourceRoot":""}